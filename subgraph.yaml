specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: ContinuousRentalAuctionFactory
    network: mumbai
    source:
      address: "0x232BbC02b5FF8bFc94CB9b7163F58f8bF82E6AfD"
      abi: ContinuousRentalAuctionFactory
      startBlock: 31700000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ContinuousRentalAuctionFactory
      abis:
        - name: ContinuousRentalAuctionFactory
          file: ./abis/ContinuousRentalAuctionFactory.json
        - name: IRentalAuctionControllerObserver
          file: ./abis/IRentalAuctionControllerObserver.json
        - name: ContinuousRentalAuction
          file: ./abis/ContinuousRentalAuction.json
        - name: ERC4907Metadata
          file: ./abis/ERC4907Metadata.json
      eventHandlers:
        - event: ContinuousRentalAuctionDeployed(indexed address,indexed address,indexed address)
          handler: handleContinuousRentalAuctionDeployed
      file: ./src/continuous-rental-auction-factory.ts

  - kind: ethereum
    name: EnglishRentalAuctionFactory
    network: mumbai
    source:
      address: "0x9116FF8B1b18b65F1d5A711c174C40089109B6a4"
      abi: EnglishRentalAuctionFactory
      startBlock: 31700000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - EnglishRentalAuctionFactory
      abis:
        - name: EnglishRentalAuctionFactory
          file: ./abis/EnglishRentalAuctionFactory.json
        - name: IRentalAuctionControllerObserver
          file: ./abis/IRentalAuctionControllerObserver.json
        - name: EnglishRentalAuction
          file: ./abis/EnglishRentalAuction.json
        - name: ERC4907Metadata
          file: ./abis/ERC4907Metadata.json
      eventHandlers:
        - event: EnglishRentalAuctionDeployed(indexed address,indexed address,indexed address)
          handler: handleEnglishRentalAuctionDeployed
      file: ./src/english-rental-auction-factory.ts


templates:
  - name: ContinuousRentalAuction
    kind: ethereum/contract
    network: mumbai
    source:
      abi: ContinuousRentalAuction
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/continuous-rental-auction.ts
      entities:
        - ContinuousRentalAuction
      abis:
        - name: ContinuousRentalAuction
          file: ./abis/ContinuousRentalAuction.json
        - name: IRentalAuctionControllerObserver
          file: ./abis/IRentalAuctionControllerObserver.json
        - name: ERC4907Metadata
          file: ./abis/ERC4907Metadata.json
      eventHandlers:
        - event: Initialized(indexed address,indexed address,indexed address,uint96,int96)
          handler: handleInitialized
        - event: RenterChanged(indexed address,indexed address)
          handler: handleRenterChanged
        - event: NewInboundStream(indexed address,int96)
          handler: handleNewInboundStream
        - event: StreamUpdated(indexed address,int96)
          handler: handleStreamUpdated
        - event: StreamTerminated(indexed address)
          handler: handleStreamTerminated

  - name: EnglishRentalAuction
    kind: ethereum/contract
    network: mumbai
    source:
      abi: EnglishRentalAuction
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/english-rental-auction.ts
      entities:
        - EnglishRentalAuction
      abis:
        - name: EnglishRentalAuction
          file: ./abis/EnglishRentalAuction.json
        - name: IRentalAuctionControllerObserver
          file: ./abis/IRentalAuctionControllerObserver.json
        - name: ERC4907Metadata
          file: ./abis/ERC4907Metadata.json
      eventHandlers:
        - event: Initialized(address,address,address,uint96,int96,uint64,uint64,uint64,uint64)
          handler: handleInitialized
        # - event: RenterChanged(indexed address,indexed address)
        #   handler: handleRenterChanged
        # - event: NewInboundStream(indexed address,int96)
        #   handler: handleNewInboundStream
        # - event: StreamUpdated(indexed address,int96)
        #   handler: handleStreamUpdated
        # - event: StreamTerminated(indexed address)
        #   handler: handleStreamTerminated

  - name: ERC4907Metadata
    kind: ethereum/contract
    network: mumbai
    source:
      abi: ERC4907Metadata
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/noop.ts
      entities:
        - ERC4907Metadata
      abis:
        - name: ERC4907Metadata
          file: ./abis/ERC4907Metadata.json
  - name: IRentalAuctionControllerObserver
    kind: ethereum/contract
    network: mumbai
    source:
      abi: IRentalAuctionControllerObserver
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/noop.ts
      entities:
        - IRentalAuctionControllerObserver
      abis:
        - name: IRentalAuctionControllerObserver
          file: ./abis/IRentalAuctionControllerObserver.json
