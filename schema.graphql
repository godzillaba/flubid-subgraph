# type ContinuousRentalAuctionDeployed @entity(immutable: true) {
#   id: Bytes!
#   auctionAddress: Bytes! # address
#   controllerObserverAddress: Bytes! # address
#   blockNumber: BigInt!
#   blockTimestamp: BigInt!
#   transactionHash: Bytes!
# }

# type RentalAuctionControllerObserverDeployed @entity(immutable: true) {
#   id: Bytes!
#   controllerObserverImplementation: Bytes! # address
#   controllerObserverAddress: Bytes! # address
#   auctionAddress: Bytes! # address
#   blockNumber: BigInt!
#   blockTimestamp: BigInt!
#   transactionHash: Bytes!
# }

type ContinuousRentalAuctionFactory @entity(immutable: true) {
  id: Bytes!
}

# type UserInfo @entity(immutable: false) {
#   id: ID!
#   rentalAuction: ContinuousRentalAuction!
#   account: Bytes! # address
#   data: Bytes! # bytes
# }

type Stream @entity(immutable: false) {
  id: Bytes! # Stream-{txhash}{logIndex}
  sender: Bytes! # address
  receiver: Bytes! # address
  flowRate: BigInt! 
}

type StreamHistory @entity(immutable: true) {
  id: Bytes! # StreamHistory-{txhash}{logIndex}
  sender: Bytes! # address
  receiver: Bytes! # address
  flowRate: BigInt

  operation: String! # create/update/delete
}

type ContinuousRentalAuction @entity(immutable: false) {
  id: Bytes!

  address: Bytes!

  controllerObserverImplementation: Bytes! # address
  controllerObserver: Bytes! # address

  acceptedToken: Bytes # address
  beneficiary: Bytes # address
  minimumBidFactorWad: BigInt
  reserveRate: BigInt

  currentRenter: Bytes # address
  
  inboundStreams: [Stream!]
  # userInfo: [UserInfo!]
  # currentWinner: Bytes! # address
  # paused: Boolean!
}

type EnglishRentalAuction @entity(immutable: false) {
  id: Bytes!

  address: Bytes!

  ## Constants
  controllerObserverImplementation: Bytes! # address
  controllerObserver: Bytes! # address

  acceptedToken: Bytes # address
  beneficiary: Bytes # address
  minimumBidFactorWad: BigInt
  reserveRate: BigInt

  minRentalDuration: BigInt
  maxRentalDuration: BigInt
  biddingPhaseDuration: BigInt
  biddingPhaseExtensionDuration: BigInt

  ## Non constants
  currentRenter: Bytes # address
}

type RentalAuction @entity(immutable: false) {
  id: Bytes! 
  type: String!
  address: Bytes! # address

  ## Constants
  controllerObserverImplementation: Bytes! # address
  controllerObserver: Bytes! # address

  acceptedToken: Bytes! # address

  ## non constants
  topBid: BigInt
  currentRenter: Bytes
}

# type RentalAuctionControllerObserver @entity(immutable: true) {
#   id: Bytes! # address
#   type: String
#   rentalAuction: Bytes! # address
# }